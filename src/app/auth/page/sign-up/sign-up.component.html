<div class="w-full h-screen flex items-center justify-center">
  <form
    [formGroup]="submitForm"
    (ngSubmit)="onSubmitForm()"
    class="w-full md:w-2/3 rounded-lg border p-3 drop-shadow-md"
  >
    <h2 class="text-2xl my-20 text-center text-gray-900 mb-8">Register</h2>
    <div class="px-12 pb-10 validation_classes">
      <!-- Input Field ( name ) -->
      <div class="w-full mb-2">
        <div>
          @let userName = submitForm.get('name');
          <label for="name">name</label>
          <input
            id="name"
            type="text"
            placeholder="name"
            class="w-full border rounded px-3 py-2 text-gray-700 focus:outline-none"
            formControlName="name"
            autocomplete="off"
          />

          @if (userName?.errors && userName?.touched) {

          <div
            class="bg-red-100 my-3 border-l-4 border-red-500 text-red-700 p-4"
            role="alert"
          >
            <p class="font-bold"></p>
            <p>
              @if (userName?.getError('required')) { Required } @else if
              (userName?.getError('minlength')) { min length 3 } @else if
              (userName?.getError('maxlength')) { max length 20 }
            </p>
          </div>
          }
        </div>
      </div>
      <!-- Input Field ( email ) -->
      <div class="w-full mb-2">
        <div>
          @let userEmail = submitForm.get('email');
          <label for="email">email</label>
          <input
            id="email"
            type="email"
            placeholder="email"
            class="w-full border rounded px-3 py-2 text-gray-700 focus:outline-none"
            formControlName="email"
            autocomplete="off"
          />

          @if (userEmail?.errors && userEmail?.touched) {

          <div
            class="bg-red-100 my-3 border-l-4 border-red-500 text-red-700 p-4"
            role="alert"
          >
            <p class="font-bold"></p>
            <p>
              @if (userEmail?.getError('required')) { Required } @else if
              (userEmail?.getError('email')) { email invalid }
            </p>
          </div>
          }
        </div>
      </div>
      <!-- Input Field ( password ) -->
      <div class="w-full mb-2">
        <div>
          @let userPassword = submitForm.get('password');
          <label for="password">password</label>
          <input
            id="password"
            type="password"
            placeholder="password"
            class="w-full border rounded px-3 py-2 text-gray-700 focus:outline-none"
            formControlName="password"
            autocomplete="off"
          />

          @if (userPassword?.errors && userPassword?.touched) {

          <div
            class="bg-red-100 my-3 border-l-4 border-red-500 text-red-700 p-4"
            role="alert"
          >
            <p class="font-bold"></p>
            <p>
              @if (userPassword?.getError('required')) { Required } @else if
              (userPassword?.getError('pattern')) { password invalid }
            </p>
          </div>
          }
        </div>
      </div>
      <!-- Input Field ( rePassword ) -->
      <div class="w-full mb-2">
        <div>
          @let userRepassword = submitForm.get('rePassword');
          <label for="RePassword">RePassword</label>
          <input
            id="RePassword"
            type="RePassword"
            placeholder="RePassword"
            class="w-full border rounded px-3 py-2 text-gray-700 focus:outline-none"
            formControlName="rePassword"
            autocomplete="off"
          />
          @if (submitForm.getError('missMatch') && userRepassword?.touched) {

          <div
            class="bg-red-100 my-3 border-l-4 border-red-500 text-red-700 p-4"
            role="alert"
          >
            <p class="font-bold"></p>
            <p>
              @if (userRepassword?.getError('required')) { Required } @else if
              (submitForm.getError('missMatch')) { password invalid }
            </p>
          </div>
          }
        </div>
      </div>
      <!-- Input Field ( phone ) -->
      <div class="w-full mb-2">
        <div>
          @let userPhone = submitForm.get('phone');
          <label for="phone">phone</label>
          <input
            id="phone"
            type="tel"
            placeholder="phone"
            class="w-full border rounded px-3 py-2 text-gray-700 focus:outline-none"
            formControlName="phone"
            autocomplete="off"
          />

          @if (userPhone?.errors && userPhone?.touched) {

          <div
            class="bg-red-100 my-3 border-l-4 border-red-500 text-red-700 p-4"
            role="alert"
          >
            <p class="font-bold"></p>
            <p>
              @if (userPhone?.getError('required')) { Required } @else if
              (userPhone?.getError('pattern')) { phone invalid }
            </p>
          </div>
          }
        </div>
      </div>

      <button
        [disabled]="isLoading"
        class="disabled:!bg-main-200 disabled:cursor-not-allowed cursor-pointer w-full py-2 mt-8 rounded-full bg-main-400 text-gray-100 focus:outline-none"
      >
        Submit
        <i
          [class]="{ '!hidden': !isLoading }"
          class="fas fa-spin fa-spinner"
        ></i>
      </button>

      @if (errorMessage.length>0) {
      <div
        class="bg-red-100 border-l-4 my-3 border-red-500 text-red-700 p-4"
        role="alert"
      >
        <p class="font-bold"></p>
        <p>
          {{ errorMessage }}
        </p>
      </div>
      } @if (successMessage.length > 0) {
      <div
        class="bg-green-100 my-3 border-l-4 border-green-500 text-green-700 p-4"
        role="alert"
      >
        <p class="font-bold"></p>
        <p>
          {{ successMessage }}
        </p>
      </div>
      }
    </div>
  </form>
</div>
